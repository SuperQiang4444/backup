---
title: Servlet线程安全
date: 2017-05-20 09:56:00
tags:
- Web
toc: true
---
昨天写了一个红包的小程序，其中不可避免的使用了实例变量。
于是便去查了一些Servlet线程安全的博客，将一些重点总结在这里。
<!--more-->
# 介绍
JSP/Servlet容器默认是采用单实例多线程

多线程下每个线程对局部变量都会有自己的一份copy，这样对局部变量的修改只会影响到自己的copy而不会对别的线程产生影响，所以这是线程安全的。

但是对于实例变量来说，由于servlet在Tomcat中是以单例模式存在的，所有的线程共享实例变量。多个线程对共享资源的访问就造成了线程不安全问题。
# 解决方法
很遗憾的是，并没有查到很好的解决方法。
如果你的项目也跟我一样无法避免使用实例变量的话。
我建议您在共享代码块上加上synchronized关键字。