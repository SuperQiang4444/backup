---
title: hexo博客文章加密案例
date: 2017-04-14 17:55:04
tags:
- demo
- JS
- 编程
toc: true
---
对博客中的部分文章进行加密
<!--more-->
# 思路
通过judge(url)函数判断当前访问的url是否为想要加密的文章的路径，
是的话就执行输入密码判断的操作。
至于密码的话就用md5进行加密。(其实可以写的相当复杂，但由于是静态博客，从源码都可以分析出来)
# 具体实现
themes\yilia\layout\_partial\head.ejs中添加script代码
我写的有点复杂就是希望他们破解起来也要费时间，这里我就不详细讲，只讲一个思路。
通过md5算法得到密文，密文跟文章内容进行操作得到一个值，将这个值保存到JS代码，输入密码时再次进行同加密就可以得出文章内容。因为源代码只有操作完的这个值，所以他们无法反向算出密文或者文章内容。
judge(url)函数如下
```
function judge(url)
{//判断是否为要加密的文章url
if(window.location.href.indexOf(url) != -1)
	{//判断密码是否正确
	var password = prompt('password:');
	if ('password' !== performPage(password) )
			{//错误就重定向到博客首页
                alert('error!');
                window.location="博客首页";
            }
	}
}
```
# 存在的问题
因为有格式的存在，当自己输出文章内容时格式就没了，所以我目前没有采用这种方式。
# update(2017.4.24)
突然发现markdown支持js的语法,所以利用和上面同样的加密，直接将js写进文章里，密码正确就document.write();输出文章内容，错误同样转到主页。

因为这个是写进文章的，无法从主页看到源代码，所以安全级别更高一点，但是如果别人用工具获取了你的源代码的话，也是没办法。

我的博客的文章就是这样的2重加密。
# update(2017.4.25)
这个版本应该是最终版本的了，以后不会再更新了。

这次不使用alert()；函数来输入密码，因为是明文的形式。
加载的时候放进1个input输入框，类型为password，用这个密码直接解析得到文本。
这次不进行密码的校验，错误会显示乱码。

这次别人能从源代码得出的只有(通过md5算法得到密文，密文跟文章内容进行操作得到这个值)，所以别人无法得到密码。因为用到了md5，所以我认为除了字典暴力破解之外，无法得到我们的密码。这个用的就是具体实现中我讲的那个思路，现在完全实现了。

参考文章有很多，这里我就不写了。
如果你也对这个有兴趣，可以联系我。在博客首页【关于我】里面有我的联系方式。